<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Archipelago Adventure</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="flex flex-col items-center justify-center min-h-screen bg-cover bg-center"
    style="
      background-image: url('gameptiasset/assets/01073865290819.5d61d475f0072.jpg');
    ">
  <link rel="stylesheet" href="style.css">
    <div
      class="status-bar fixed top-2 left-1/2 transform -translate-x-1/2 w-11/12 bg-blue-900 text-white p-3 rounded-lg flex justify-between items-center shadow-lg gap-20"
    >
      <span><strong>Archipelago Adventure</strong></span>
    </div>
    <div class="flex items-center gap-2 mt-10">
      <span class="mt-5">‚ù§</span>
      <div class="w-40 h-5 bg-gray-300 rounded-full overflow-hidden mt-5">
          <div id="health-bar" class="h-full bg-red-500 transition-all" style="width: 100%;"></div>
      </div>
      <span id="health-text" class="mt-5">100%</span>
      <span class="mt-5 ml-28">‚ù§</span>
      <div class="w-40 h-5 bg-gray-300 rounded-full overflow-hidden mt-5">
          <div id="health-bar" class="h-full bg-red-500 transition-all" style="width: 100%;"></div>
      </div>
      <span id="health-text" class="mt-5">100%</span>
      <span class="mt-5 ml-28">‚ù§</span>
      <div class="w-40 h-5 bg-gray-300 rounded-full overflow-hidden mt-5">
          <div id="health-bar" class="h-full bg-red-500 transition-all" style="width: 100%;"></div>
      </div>
      <span id="health-text" class="mt-5">100%</span>
      <span class="mt-5 ml-28">‚ù§</span>
      <div class="w-40 h-5 bg-gray-300 rounded-full overflow-hidden mt-5">
          <div id="health-bar" class="h-full bg-red-500 transition-all" style="width: 100%;"></div>
      </div>
      <span id="health-text" class="mt-5">100%</span>
  </div>

</head>
    <div class="flex flex-row items-center mt-8 space-x-8">
        <div class="relative w-[850px] h-[600px]">
            <img src="gameptiasset/assets/map.jpg" class="w-full h-full rounded-lg shadow-lg">
            
            <div id="player" class="absolute text-white font-bold transition-all" style="left: 50px; top: 50px; z-index: 10;">
              <img id="player-img" src="" width="40" class="rounded-full">
          </div>
          
          <img src="gameptiasset/assets/gunung bromo-Photoroom.png" class="absolute w-16 h-16" style="left: 760px; top: 470px; z-index: 5;">
          <img src="gameptiasset/assets/pantai kuta-Photoroom.png" class="absolute w-16 h-16" style="left: 270px; top: 445px; z-index: 5;">
          <img src="gameptiasset/assets/borobudur-removebg-preview.png" class="absolute w-16 h-16" style="left: 680px; top: 240px; z-index: 5;">
          <img src="gameptiasset/assets/laketoba-Photoroom.png" class="absolute w-16 h-16" style="left: 380px; top: 60px; z-index: 5;">
          
        </div>

        <div id="location" class="relative w-[250px] h-[600px] bg-white p-4 rounded-lg shadow-lg">
            <div id="location-text" class="text-lg font-bold mb-4">You're at Home</div>
            <button id="action1" class="w-full bg-blue-500 text-white p-2 rounded-lg mb-2 hover:bg-blue-600"></button>
            <button id="action2" class="w-full bg-blue-500 text-white p-2 rounded-lg mb-2 hover:bg-blue-600"></button>
            <button id="action3" class="w-full bg-blue-500 text-white p-2 rounded-lg mb-2 hover:bg-blue-600"></button>
            <button id="action4" class="w-full bg-yellow-500 text-white p-2 rounded-lg hover:bg-yellow-600"></button>
            <div class="gift bg-yellow-300 p-2 rounded-lg mt-2 text-center"></div>
            <div class="mt-6 flex flex-col items-center">
                <button onclick="move('up')">
                    <img src="gameptiasset/assets/top-removebg-preview.png" alt="up" class="bg-blue-200 w-12 h-12 flex items-center justify-center rounded-full hover:bg-pink-200">
                </button>
                <div class="flex space-x-4 mt-2">
                    <button onclick="move('left')">
                        <img src="gameptiasset/assets/left-removebg-preview.png" alt="left" class="bg-blue-200 w-12 h-12 flex items-center justify-center rounded-full hover:bg-pink-200">
                    </button>
                    <button onclick="move('right')">
                        <img src="gameptiasset/assets/right-removebg-preview.png" alt="right" class="bg-blue-200 w-12 h-12 flex items-center justify-center rounded-full hover:bg-pink-200 ml-5">
                    </button>
                </div>
                <button onclick="move('down')">
                    <img src="gameptiasset/assets/down-removebg-preview.png" alt="down" class="bg-blue-200 w-12 h-12 flex items-center justify-center rounded-full hover:bg-pink-200">
                </button>
            </div>
        </div>
    </div>
    

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let selectedCharacterImage =
          localStorage.getItem("selectedCharacterImage") ||
          "gameptiasset/assets/wayang1-removebg-preview.png";
        let playerImg = document.getElementById("player-img");

        if (playerImg) {
          playerImg.src = selectedCharacterImage;
        }
      });

      let position = { x: 50, y: 50 };
      let isFlipped = false;
      const step = 30; // Movement distance

      function move(direction) {
            let player = document.getElementById("player");
            let playerImg = document.getElementById("player-img");
            if (!player) return;

            switch (direction) {
                case 'up': position.y -= step; break;
                case 'down': position.y += step; break;
                case 'left': position.x -= step; playerImg.style.transform = "scaleX(-1)"; break;
                case 'right': position.x += step; playerImg.style.transform = "scaleX(1)"; break;
            }

            player.style.left = position.x + "px";
            player.style.top = position.y + "px";
            updateLocationButtons();
        }

        function updateLocationButtons() {
            let locationText = document.getElementById("location-text");
            let actions = ["action1", "action2", "action3", "action4"].map(id => document.getElementById(id));

            if (Math.abs(position.x - 50) < 50 && Math.abs(position.y - 50) < 50) {
                locationText.innerHTML = "You're at Home";
                actions[0].innerHTML = "Get Some Meal";
                actions[1].innerHTML = "Take a Bath";
                actions[2].innerHTML = "Sleep";
                actions[3].innerHTML = "üõà Do Chores";
                document.getElementsByClassName("gift");
            } else if (Math.abs(position.x - 280) < 60 && Math.abs(position.y - 440) < 60) {
                locationText.innerHTML = "You're at Kuta Beach";
                actions[0].innerHTML = "Sand Play";
                actions[1].innerHTML = "üõà Buy Drink";
                actions[2].innerHTML = "üõà Buy Snack";
                actions[3].innerHTML = "üõà Pick-up Trash";
                document.getElementsByClassName("gift");
            } else if (Math.abs(position.x - 690) < 60 && Math.abs(position.y - 210) < 60) {
                locationText.innerHTML = "You're at Borobudur Temple";
                actions[0].innerHTML = "Take a Picture";
                actions[1].innerHTML = "üõà Buy Local Food";
                actions[2].innerHTML = "üõà Buy Souvenir";
                actions[3].innerHTML = "üõà Rent Local Costum";
                document.getElementsByClassName("gift");
            } else if (Math.abs(position.x - 770) < 60 && Math.abs(position.y - 460) < 60) {
                locationText.innerHTML = "You're at Bromo Mountain";
                actions[0].innerHTML = "Make a Cinematic Video";
                actions[1].innerHTML = "üõà Buy Drink";
                actions[2].innerHTML = "üõà Plant a Flag";
                actions[3].innerHTML = "Pray to God";
                document.getElementsByClassName("gift");
            } else if (Math.abs(position.x - 390) < 60 && Math.abs(position.y - 70) < 60) {
                locationText.innerHTML = "You're at Toba Lake";
                actions[0].innerHTML = "Take a Shower";
                actions[1].innerHTML = "Catch a Fish";
                actions[2].innerHTML = "Take a Picture";
                actions[3].innerHTML = "Washing Chlotes";
                document.getElementsByClassName("gift");
            } else {
                locationText.innerHTML = "You're Lost!";
                actions.forEach(action => action.innerHTML = "");
            }
        }

        document.addEventListener("keydown", function(event) {
            const keyMap = { "ArrowUp": 'up', "ArrowDown": 'down', "ArrowLeft": 'left', "ArrowRight": 'right' };
            if (keyMap[event.key]) move(keyMap[event.key]);
        });
    </script>
  </body>
</html>